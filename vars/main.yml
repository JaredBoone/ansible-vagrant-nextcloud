# https://galaxy.ansible.com/geerlingguy/apache
apache_allow_override: "All"
apache_document_root: "/var/www/html"
apache_mods_enabled:
  - rewrite.load
apache_listen_port: 80
apache_vhosts:
  - servername: "localhost"
    documentroot: '{{ apache_document_root }}'
    extra_parameters: |
              Redirect permanent / https://localhost:8443/
apache_listen_port_ssl: 443
apache_vhosts_ssl:
  - servername: "localhost"
    documentroot: '{{ apache_document_root }}'
    certificate_file: "/etc/pki/tls/certs/localhost.crt"
    certificate_key_file: "/etc/pki/tls/private/localhost.key"
    extra_parameters: |
              ProxyPassMatch ^/(.*\.php(/.*)?)$ "fcgi://127.0.0.1:9000/var/www/html"
              <IfModule mod_headers.c>
                Header always set Strict-Transport-Security "max-age=15552000; includeSubDomains"
              </IfModule>

# <Directory "/var/www/html">
#     Options Indexes FollowSymLinks
#     AllowOverride All
#     Require all granted
# </Directory>


# https://galaxy.ansible.com/geerlingguy/postgresql
postgresql_databases:
  - name: '{{ nextcloud_postgres_db }}'
postgresql_users:
  - name: '{{ nextcloud_postgres_user }}'
    password: '{{ nextcloud_postgres_pw }}'

# https://galaxy.ansible.com/geerlingguy/php
php_memory_limit: "512M"
php_max_execution_time: "90"
php_upload_max_filesize: "1024M"
php_version: '7.2'
php_packages: 
  - php
  - php-cli
  - php-common
  - php-devel
  - php-fpm
  - php-gd
  - php-intl
  - php-json
  - php-mbstring
  - php-mcrypt
  - php-opcache
  - php-pdo
  - php-pdo_pgsql
  - php-pecl-apcu
  - php-pecl-zip
  - php-posix
  - php-xml
  - php-fpm
  - php-pecl-imagick
php_enablerepo: "epel,remi-php72"
php_enable_php_fpm: true
php_opcache_enable_cli: "1"
php_opcache_interned_strings_buffer: "8"
php_opcache_max_accelerated_files: "10000"
php_opcache_memory_consumption: "128"
php_opcache_revalidate_freq: "1"


